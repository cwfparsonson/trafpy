

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Flow-Centric Traffic Demands &mdash; TrafPy 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Job-Centric Traffic Demands" href="tutorial_job_centric_traffic_demands.html" />
    <link rel="prev" title="Networks" href="tutorial_networks.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TrafPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tutorial_generator.html">TrafPy Generator</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tutorial_trafpy_distributions.html">TrafPy Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_value_distributions.html">Value Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_node_distributions.html">Node Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_networks.html">Networks</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Flow-Centric Traffic Demands</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_job_centric_traffic_demands.html">Job-Centric Traffic Demands</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_visually_shaping_distributions.html">Visually Shaping TrafPy Distributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_benchmarker.html">TrafPy Benchmarker</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_manager.html">TrafPy Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="Citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">setup module</a></li>
<li class="toctree-l1"><a class="reference internal" href="trafpy.html">trafpy package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TrafPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="tutorial.html">Tutorial</a> &raquo;</li>
        
          <li><a href="tutorial_generator.html">TrafPy Generator</a> &raquo;</li>
        
      <li>Flow-Centric Traffic Demands</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorial_flow_centric_traffic_demands.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="flow-centric-traffic-demands">
<h1>Flow-Centric Traffic Demands<a class="headerlink" href="#flow-centric-traffic-demands" title="Permalink to this headline">¶</a></h1>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trafpy.generator</span> <span class="k">as</span> <span class="nn">tpg</span>
</pre></div>
</div>
<p>A single demand in a network can be considered as either a <strong>flow</strong> or a computation
graph (a <strong>job</strong>) whose dependencies (edges) may form flows. Both flow-centric
and job-centric network traffic demand generation and management are supported
by TrafPy.</p>
<p>A flow is some information being sent from a source node to a destination node
in a network (e.g. a data centre network).</p>
<p>Common flow demand characteristics include:</p>
<ul class="simple">
<li><p>size;</p></li>
<li><p>interarrival time; and</p></li>
<li><p>source-destination node distribution.</p></li>
</ul>
<p>Using the value and node distribution generation functions you’ve seen so far,
you can use TrafPy to generate realistic flow demands. Later in this tutorial,
you will see how to use TrafPy’s Jupyter Notebook tool to visually shape your
distributions such that they match real data/literature distributions. For now,
assume that you already know the distribution parameters you want. Consider
that you want to create 1,000 realistic data centre flows in a simple 5-node
network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">network</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_simple_network</span><span class="p">(</span><span class="n">ep_label</span><span class="o">=</span><span class="s1">&#39;endpoint&#39;</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//tutorial_flow_centric_traffic_demands-2.png">png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-2.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-2.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/tutorial_flow_centric_traffic_demands-2.png" src="_images/tutorial_flow_centric_traffic_demands-2.png" />
</div>
<p>You could start by defining the flow size distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow_size_dist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;weibull&#39;</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_alpha&#39;</span><span class="p">:</span> <span class="mf">1.4</span><span class="p">,</span> <span class="s1">&#39;_lambda&#39;</span><span class="p">:</span> <span class="mi">7000</span><span class="p">},</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">rand_var_name</span><span class="o">=</span><span class="s1">&#39;Flow Size&#39;</span><span class="p">,</span><span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mf">1e2</span><span class="p">,</span><span class="mf">1e12</span><span class="p">],</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//tutorial_flow_centric_traffic_demands-3.png">png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-3.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-3.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/tutorial_flow_centric_traffic_demands-3.png" src="_images/tutorial_flow_centric_traffic_demands-3.png" />
</div>
<p>then the flow interarrival time distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">interarrival_time_dist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;weibull&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_alpha&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s1">&#39;_lambda&#39;</span><span class="p">:</span> <span class="mi">6000</span><span class="p">},</span> <span class="n">rand_var_name</span><span class="o">=</span><span class="s1">&#39;Interarrival Time&#39;</span><span class="p">,</span> <span class="n">min_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">print_data</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//tutorial_flow_centric_traffic_demands-4.png">png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-4.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-4.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/tutorial_flow_centric_traffic_demands-4.png" src="_images/tutorial_flow_centric_traffic_demands-4.png" />
</div>
<p>and then the source-destination node distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">endpoints</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;endpoints&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_node_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">num_skewed_nodes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id1">
<img alt="_images/tutorial_flow_centric_traffic_demands-5_00.png" src="_images/tutorial_flow_centric_traffic_demands-5_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//tutorial_flow_centric_traffic_demands-5_00.png">png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-5_00.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-5_00.pdf">pdf</a>)</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id2">
<img alt="_images/tutorial_flow_centric_traffic_demands-5_01.png" src="_images/tutorial_flow_centric_traffic_demands-5_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//tutorial_flow_centric_traffic_demands-5_01.png">png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-5_01.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial_flow_centric_traffic_demands-5_01.pdf">pdf</a>)</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The network load refers to the overall amount of traffic received by the
network. This is commonly referred to as a load rate (information units
arriving per unit time) or as a load fraction (the fraction of the total
network capacity being requested for a given duration). <code class="docutils literal notranslate"><span class="pre">TrafPy</span></code> typically uses
the load fraction definition for load, therefore loads can be varied between 0
and 1.</p>
<p>A key feature of <code class="docutils literal notranslate"><span class="pre">TrafPy</span></code> is that you can generate any load for your custom
network. To do this, you should provide <code class="docutils literal notranslate"><span class="pre">TrafPy</span></code> with a <code class="docutils literal notranslate"><span class="pre">network_load_config</span></code>
dictionary which tells <code class="docutils literal notranslate"><span class="pre">TrafPy</span></code> (1) the end point capacity of your network, (2)
the maximum capacity of your network, and (3) the overall load fraction you
would like <code class="docutils literal notranslate"><span class="pre">TrafPy</span></code> to generate for your network. Consider that you would like
<code class="docutils literal notranslate"><span class="pre">TrafPy</span></code> to generate a 0.1 load traffic trace for your network (i.e. around 10%
of your total network capacity will be requested per unit time):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">network_load_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;network_rate_capacity&#39;</span><span class="p">:</span> <span class="n">network</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;max_nw_capacity&#39;</span><span class="p">],</span> <span class="s1">&#39;ep_link_capacity&#39;</span><span class="p">:</span> <span class="n">network</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;ep_link_capacity&#39;</span><span class="p">],</span> <span class="s1">&#39;target_load_fraction&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">}</span>
</pre></div>
</div>
<p>You can then use your distributions and load config to generate flow-centric demand data formatted
neatly into a single dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flow_centric_demand_data</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">create_demand_data</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">node_dist</span><span class="o">=</span><span class="n">node_dist</span><span class="p">,</span><span class="n">flow_size_dist</span><span class="o">=</span><span class="n">flow_size_dist</span><span class="p">,</span><span class="n">max_num_demands</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">interarrival_time_dist</span><span class="o">=</span><span class="n">interarrival_time_dist</span><span class="p">,</span><span class="n">network_load_config</span><span class="o">=</span><span class="n">network_load_config</span><span class="p">)</span>
</pre></div>
</div>
<p>Don’t forget to save your data as a pickle:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tpg</span><span class="o">.</span><span class="n">pickle_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">flow_centric_demand_data</span><span class="p">,</span><span class="n">path_to_save</span><span class="o">=</span><span class="s1">&#39;data/flow_centric_demand_data.pickle&#39;</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">zip_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>or as a csv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tpg</span><span class="o">.</span><span class="n">save_data_as_csv</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">flow_centric_demand_data</span><span class="p">,</span><span class="n">path_to_save</span><span class="o">=</span><span class="s1">&#39;data/flow_centric_demand_data.csv&#39;</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>N.B. You can also re-load previously pickled data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flow_centric_demand_data</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">unpickle_data</span><span class="p">(</span><span class="n">path_to_load</span><span class="o">=</span><span class="s1">&#39;data/flow_centric_demand_data.pickle&#39;</span><span class="p">,</span><span class="n">zip_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>TrafPy flow-centric demand data dictionaries are organised as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;flow_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;flow_0&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&#39;flow_n&#39;</span><span class="p">],</span>
    <span class="s1">&#39;sn&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">flow_0_sn</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">flow_n_sn</span><span class="p">],</span>
    <span class="s1">&#39;dn&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">flow_0_dn</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">flow_n_dn</span><span class="p">],</span>
    <span class="s1">&#39;flow_size&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">flow_0_size</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">flow_n_size</span><span class="p">],</span>
    <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">event_time_flow_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">event_time_flow_n</span><span class="p">],</span>
    <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">index_flow_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">index_flow_1</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial_job_centric_traffic_demands.html" class="btn btn-neutral float-right" title="Job-Centric Traffic Demands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorial_networks.html" class="btn btn-neutral float-left" title="Networks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Christopher W. F. Parsonson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>