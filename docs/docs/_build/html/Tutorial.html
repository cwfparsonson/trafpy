

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; TrafPy 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="License" href="License.html" />
    <link rel="prev" title="Install" href="Install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TrafPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#trafpy-generator">TrafPy Generator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#value-distributions">Value Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#node-distributions">Node Distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#networks">Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-centric-traffic-demands">Flow-Centric Traffic Demands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#job-centric-traffic-demands">Job-Centric Traffic Demands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#visually-shaping-trafpy-distributions">Visually Shaping TrafPy Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trafpy-manager">TrafPy Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="Citing.html">Citing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TrafPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This guide can help you start with TrafPy.</p>
<div class="section" id="trafpy-generator">
<h2>TrafPy Generator<a class="headerlink" href="#trafpy-generator" title="Permalink to this headline">¶</a></h2>
<p>Import the TrafPy generator package.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trafpy.generator</span> <span class="k">as</span> <span class="nn">tpg</span>
</pre></div>
</div>
<p>Network traffic patterns can be characterised by probability distributions. By
accurately describing a probability distribution, one can sample from it to generate
arbitrary amounts of realistic network traffic.</p>
<div class="section" id="value-distributions">
<h3>Value Distributions<a class="headerlink" href="#value-distributions" title="Permalink to this headline">¶</a></h3>
<p>The most simple probability distribution for random variable values is the
<strong>uniform distribution</strong>, where each random variable value has an equal probability
of occurring</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span><span class="p">,</span> <span class="n">rand_vars</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_uniform_val_dist</span><span class="p">(</span><span class="n">min_val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_val</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_bins</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-2.png">png</a>, <a class="reference external" href=".//Tutorial-2.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-2.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-2.png" src="_images/Tutorial-2.png" />
</div>
<p>TrafPy probability distributions are defined as Python dictionaries with
value-probability key-value pairs</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uniform probability distribution:</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prob_dist</span><span class="p">))</span>
<span class="go">Uniform probability distribution:</span>
<span class="go">{1: 0.01, 2: 0.01, 3: 0.01, 4: 0.01, 5: 0.01, 6: 0.01, 7: 0.01, 8: 0.01, 9: 0.01, 10: 0.01, 11: 0.01, 12: 0.01, 13: 0.01, 14: 0.01, 15: 0.01, 16: 0.01, 17: 0.01, 18: 0.01, 19: 0.01, 20: 0.01, 21: 0.01, 22: 0.01, 23: 0.01, 24: 0.01, 25: 0.01, 26: 0.01, 27: 0.01, 28: 0.01, 29: 0.01, 30: 0.01, 31: 0.01, 32: 0.01, 33: 0.01, 34: 0.01, 35: 0.01, 36: 0.01, 37: 0.01, 38: 0.01, 39: 0.01, 40: 0.01, 41: 0.01, 42: 0.01, 43: 0.01, 44: 0.01, 45: 0.01, 46: 0.01, 47: 0.01, 48: 0.01, 49: 0.01, 50: 0.01, 51: 0.01, 52: 0.01, 53: 0.01, 54: 0.01, 55: 0.01, 56: 0.01, 57: 0.01, 58: 0.01, 59: 0.01, 60: 0.01, 61: 0.01, 62: 0.01, 63: 0.01, 64: 0.01, 65: 0.01, 66: 0.01, 67: 0.01, 68: 0.01, 69: 0.01, 70: 0.01, 71: 0.01, 72: 0.01, 73: 0.01, 74: 0.01, 75: 0.01, 76: 0.01, 77: 0.01, 78: 0.01, 79: 0.01, 80: 0.01, 81: 0.01, 82: 0.01, 83: 0.01, 84: 0.01, 85: 0.01, 86: 0.01, 87: 0.01, 88: 0.01, 89: 0.01, 90: 0.01, 91: 0.01, 92: 0.01, 93: 0.01, 94: 0.01, 95: 0.01, 96: 0.01, 97: 0.01, 98: 0.01, 99: 0.01, 100: 0.01}</span>
</pre></div>
</div>
<p>and the probability density plot is constructed by sampling random variables from the discrete probability distribution.</p>
<p>Demand characteristics of real network traffic patterns are rarely uniform. However,
they can often be described by certain well-defined <strong>named distributions</strong>. These
named distributions are themselves characterised by just a few parameters, making them
easy to reproduce.</p>
<p>Named distributions supported by TrafPy include the <em>exponential distribution</em></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span><span class="p">,</span> <span class="n">rand_vars</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;exponential&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_beta&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-4.png">png</a>, <a class="reference external" href=".//Tutorial-4.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-4.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-4.png" src="_images/Tutorial-4.png" />
</div>
<p>the <em>log-normal distribution</em></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span><span class="p">,</span> <span class="n">rand_vars</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;lognormal&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_mu&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;_sigma&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-5.png">png</a>, <a class="reference external" href=".//Tutorial-5.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-5.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-5.png" src="_images/Tutorial-5.png" />
</div>
<p>the <em>Weibull distribution</em></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span><span class="p">,</span> <span class="n">rand_vars</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;weibull&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_alpha&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s1">&#39;_lambda&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">3.5</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-6.png">png</a>, <a class="reference external" href=".//Tutorial-6.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-6.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-6.png" src="_images/Tutorial-6.png" />
</div>
<p>and the <em>Pareto distribution</em></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span><span class="p">,</span> <span class="n">rand_vars</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;pareto&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_alpha&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;_mode&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span> <span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-7.png">png</a>, <a class="reference external" href=".//Tutorial-7.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-7.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-7.png" src="_images/Tutorial-7.png" />
</div>
<p>However, some demand characteristics cannot be accurately described by these named
distributions. Instead, they are described by arbitrary <strong>multimodal distributions</strong>,
which are distributions with more than one <strong>mode</strong> which may or may not have some amount
of <strong>skewness</strong> and/or <strong>kurtosis</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span><span class="p">,</span> <span class="n">rand_vars</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_val_dist</span><span class="p">(</span><span class="n">min_val</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">max_val</span><span class="o">=</span><span class="mi">7000</span><span class="p">,</span><span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span><span class="mi">4000</span><span class="p">],</span><span class="n">skews</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">scales</span><span class="o">=</span><span class="p">[</span><span class="mi">150</span><span class="p">,</span><span class="mi">1500</span><span class="p">],</span><span class="n">num_skew_samples</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">,</span><span class="mi">650</span><span class="p">],</span><span class="n">bg_factor</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">return_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10000</span><span class="p">],</span><span class="n">num_bins</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-8.png">png</a>, <a class="reference external" href=".//Tutorial-8.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-8.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-8.png" src="_images/Tutorial-8.png" />
</div>
<p>Later in this tutorial, we will see how to visually shape a multimodal distribution
using TrafPy, allowing for almost any distribution to be generated.</p>
</div>
<div class="section" id="node-distributions">
<h3>Node Distributions<a class="headerlink" href="#node-distributions" title="Permalink to this headline">¶</a></h3>
<p>Network traffic travels from a <strong>source</strong> node to a <strong>destination</strong> node.
Source-destination nodes are <strong>endpoints</strong> in a network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">endpoints</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;server_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
</pre></div>
</div>
<p>How regularly each node is selected as a source or destination is determined by a
<strong>node distribution probability matrix</strong>. The most simple node distribution
is the <strong>uniform distribution</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_uniform_node_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id1">
<img alt="_images/Tutorial-10_00.png" src="_images/Tutorial-10_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-10_00.png">png</a>, <a class="reference external" href=".//Tutorial-10_00.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-10_00.pdf">pdf</a>)</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id2">
<img alt="_images/Tutorial-10_01.png" src="_images/Tutorial-10_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-10_01.png">png</a>, <a class="reference external" href=".//Tutorial-10_01.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-10_01.pdf">pdf</a>)</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Since different endpoint nodes in a network likely have different hardware
capabilities, network node distributions are rarely uniform. Instead, some nodes
become ‘hot nodes’ and are requested more than others, forming a <strong>multimodal
node distribution</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_node_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">skewed_nodes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;server_2&#39;</span><span class="p">],</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id3">
<img alt="_images/Tutorial-11_00.png" src="_images/Tutorial-11_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-11_00.png">png</a>, <a class="reference external" href=".//Tutorial-11_00.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-11_00.pdf">pdf</a>)</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id4">
<img alt="_images/Tutorial-11_01.png" src="_images/Tutorial-11_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-11_01.png">png</a>, <a class="reference external" href=".//Tutorial-11_01.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-11_01.pdf">pdf</a>)</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Instead of certain <em>nodes</em> being requested more regularly, sometimes certain
<em>node pairs</em> in the network might be skewed, forming a <strong>multimodal node pair</strong>
distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_node_pair_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">skewed_pairs</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;server_1&#39;</span><span class="p">,</span><span class="s1">&#39;server_3&#39;</span><span class="p">],[</span><span class="s1">&#39;server_4&#39;</span><span class="p">,</span><span class="s1">&#39;server_2&#39;</span><span class="p">]],</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id5">
<img alt="_images/Tutorial-12_00.png" src="_images/Tutorial-12_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-12_00.png">png</a>, <a class="reference external" href=".//Tutorial-12_00.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-12_00.pdf">pdf</a>)</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id6">
<img alt="_images/Tutorial-12_01.png" src="_images/Tutorial-12_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-12_01.png">png</a>, <a class="reference external" href=".//Tutorial-12_01.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-12_01.pdf">pdf</a>)</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>Different networks have different node distributions. Sometimes you may want a
simple uniform distribution, or a slightly skewed distribution, or certain nodes
being heavily in demand, or certain node pairs being heavily in demand. Furthermore,
you may want all of the above, but may also want to specify certain things yourself
(e.g. which specific nodes/pairs to bias, how high demand they’re in, how many nodes
are in high demand etc.), or you may want these specifics to be randomly generated.
The above functions handle all of the above functionality. See their documentation
for further details.</p>
<p>You can create any size of node distribution you like to fit any network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">endpoints</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;server_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">64</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_node_pair_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id7">
<img alt="_images/Tutorial-13_00.png" src="_images/Tutorial-13_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-13_00.png">png</a>, <a class="reference external" href=".//Tutorial-13_00.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-13_00.pdf">pdf</a>)</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id8">
<img alt="_images/Tutorial-13_01.png" src="_images/Tutorial-13_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-13_01.png">png</a>, <a class="reference external" href=".//Tutorial-13_01.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-13_01.pdf">pdf</a>)</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>You can then sample from your node distribution to generate source-destination
pairs</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sn</span><span class="p">,</span> <span class="n">dn</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_node_demands</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">node_dist</span><span class="o">=</span><span class="n">node_dist</span><span class="p">,</span><span class="n">num_demands</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="networks">
<h3>Networks<a class="headerlink" href="#networks" title="Permalink to this headline">¶</a></h3>
<p>By definition, a network is a collection of nodes (vertices) which together
form pairs of nodes connected by links (edges). Some or all of these nodes can
act as <strong>sources</strong> and <strong>destinations</strong> for network traffic <strong>demands</strong>. Such
network nodes are referred to as <strong>endpoints</strong>. Endpoints might be separated by
multiple links and nodes, some of which may be endpoints and some not.</p>
<p>Generate a simple 5-node network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">network</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_simple_network</span><span class="p">(</span><span class="n">ep_label</span><span class="o">=</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-15.png">png</a>, <a class="reference external" href=".//Tutorial-15.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-15.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-15.png" src="_images/Tutorial-15.png" />
</div>
<p>or the 14-node NSFNET network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">network</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_nsfnet_network</span><span class="p">(</span><span class="n">ep_label</span><span class="o">=</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-16.png">png</a>, <a class="reference external" href=".//Tutorial-16.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-16.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-16.png" src="_images/Tutorial-16.png" />
</div>
<p>or a fat-tree network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">network</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_fat_tree</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-17.png">png</a>, <a class="reference external" href=".//Tutorial-17.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-17.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-17.png" src="_images/Tutorial-17.png" />
</div>
<p>A single demand in a network can be considered as either a <strong>flow</strong> or a computation
graph (a <strong>job</strong>) whose dependencies (edges) may form flows. Both flow-centric
and job-centric network traffic demand generation and management are supported
by TrafPy.</p>
</div>
<div class="section" id="flow-centric-traffic-demands">
<h3>Flow-Centric Traffic Demands<a class="headerlink" href="#flow-centric-traffic-demands" title="Permalink to this headline">¶</a></h3>
<p>A flow is some information being sent from a source node to a destination node
in a network (e.g. a data centre network).</p>
<p>Common flow demand characteristics include:</p>
<ul class="simple">
<li><p>size;</p></li>
<li><p>interarrival time; and</p></li>
<li><p>source-destination node distribution.</p></li>
</ul>
<p>Using the value and node distribution generation function you’ve seen so far,
you can use TrafPy to generate realistics flow demands. Later in this tutorial,
you will see how to use TrafPy’s Jupyter Notebook tool to visually shape your
distributions such that they match real data/literature distributions. For now,
assume that we already know the distribution parameters we want. Consider
that we want to create 1,000 realistic data centre flows in a simple 5-node
network</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">num_demands</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">network</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_simple_network</span><span class="p">(</span><span class="n">ep_label</span><span class="o">=</span><span class="s1">&#39;endpoint&#39;</span><span class="p">,</span> <span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-18.png">png</a>, <a class="reference external" href=".//Tutorial-18.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-18.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-18.png" src="_images/Tutorial-18.png" />
</div>
<p>You could start by defining the flow size distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow_size_dist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;weibull&#39;</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_alpha&#39;</span><span class="p">:</span> <span class="mf">1.4</span><span class="p">,</span> <span class="s1">&#39;_lambda&#39;</span><span class="p">:</span> <span class="mi">7000</span><span class="p">},</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">rand_var_name</span><span class="o">=</span><span class="s1">&#39;Flow Size&#39;</span><span class="p">,</span><span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mf">1e2</span><span class="p">,</span><span class="mf">1e12</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-19.png">png</a>, <a class="reference external" href=".//Tutorial-19.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-19.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-19.png" src="_images/Tutorial-19.png" />
</div>
<p>then the flow interarrival time distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">interarrival_time_dist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_named_val_dist</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="s1">&#39;lognormal&#39;</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;_mu&#39;</span><span class="p">:</span> <span class="mf">7.4</span><span class="p">,</span> <span class="s1">&#39;_sigma&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">rand_var_name</span><span class="o">=</span><span class="s1">&#39;Interarrival Time&#39;</span><span class="p">,</span><span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="mf">1e1</span><span class="p">,</span><span class="mf">1e6</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//Tutorial-20.png">png</a>, <a class="reference external" href=".//Tutorial-20.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-20.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/Tutorial-20.png" src="_images/Tutorial-20.png" />
</div>
<p>and then the source-destination node distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">endpoints</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;endpoints&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_node_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">num_skewed_nodes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id9">
<img alt="_images/Tutorial-21_00.png" src="_images/Tutorial-21_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-21_00.png">png</a>, <a class="reference external" href=".//Tutorial-21_00.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-21_00.pdf">pdf</a>)</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id10">
<img alt="_images/Tutorial-21_01.png" src="_images/Tutorial-21_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//Tutorial-21_01.png">png</a>, <a class="reference external" href=".//Tutorial-21_01.hires.png">hires.png</a>, <a class="reference external" href=".//Tutorial-21_01.pdf">pdf</a>)</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>You can then use your distributions to generate flow-centric demand data formatted
neatly into a single dictionary</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow_centric_demand_data</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">create_demand_data</span><span class="p">(</span><span class="n">num_demands</span><span class="o">=</span><span class="n">num_demands</span><span class="p">,</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">node_dist</span><span class="o">=</span><span class="n">node_dist</span><span class="p">,</span><span class="n">flow_size_dist</span><span class="o">=</span><span class="n">flow_size_dist</span><span class="p">,</span><span class="n">interarrival_time_dist</span><span class="o">=</span><span class="n">interarrival_time_dist</span><span class="p">)</span>
</pre></div>
</div>
<p>Don’t forget to save your data as a pickle</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tpg</span><span class="o">.</span><span class="n">pickle_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">flow_centric_demand_data</span><span class="p">,</span><span class="n">path_to_save</span><span class="o">=</span><span class="s1">&#39;data/flow_centric_demand_data.pickle&#39;</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">zip_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>or as a csv</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tpg</span><span class="o">.</span><span class="n">save_data_as_csv</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">flow_centric_demand_data</span><span class="p">,</span><span class="n">path_to_save</span><span class="o">=</span><span class="s1">&#39;data/flow_centric_demand_data.csv&#39;</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>N.B. You can also re-load previously pickled data</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow_centric_demand_data</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">unpickle_data</span><span class="p">(</span><span class="n">path_to_load</span><span class="o">=</span><span class="s1">&#39;data/flow_centric_demand_data.pickle&#39;</span><span class="p">,</span><span class="n">zip_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>TrafPy flow-centric demand data dictionaries are organised as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;flow_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;flow_0&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&#39;flow_n&#39;</span><span class="p">],</span>
    <span class="s1">&#39;sn&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">flow_0_sn</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">flow_n_sn</span><span class="p">],</span>
    <span class="s1">&#39;dn&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">flow_0_dn</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">flow_n_dn</span><span class="p">],</span>
    <span class="s1">&#39;flow_size&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">flow_0_size</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">flow_n_size</span><span class="p">],</span>
    <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">event_time_flow_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">event_time_flow_n</span><span class="p">],</span>
    <span class="s1">&#39;establish&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">event_establish_flow_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">event_establish_flow_1</span><span class="p">],</span>
    <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">index_flow_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">index_flow_1</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">'establish'</span></code> key’s values are is binary values indicating whether the demand is a connection
establishment request (1) or a take-down request (0) for a given event. Specifying
take-down requests is optional in TrafPy. If take-downs have been speified, then
there will be <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">num_demands</span></code> events in the demand data dictionary, otherwise
there will be <code class="docutils literal notranslate"><span class="pre">num_demands</span></code> events.</p>
</div>
<div class="section" id="job-centric-traffic-demands">
<h3>Job-Centric Traffic Demands<a class="headerlink" href="#job-centric-traffic-demands" title="Permalink to this headline">¶</a></h3>
<p>A job is a task sent to a network (such as a data centre) to execute. Jobs are
computation graphs made up of <strong>operations</strong> (ops). Jobs might be e.g. a Google
search query, generating a user’s Facebook feed, performing a TensorFlow machine
learning task (e.g. backpropagation), etc.</p>
<p>In this context, an op is a data process ran on some machine where the result
is specified by a pre-determined rule/programme. Each op requires &gt;= 0 tensors/
data objects as input, and produces &gt;= tensors as output.</p>
<p>In a job computation graph, if an op v requires &gt;= 1 input(s) produced by op u,
the ops will be connected by a directed edge, [u, v], representing the <strong>dependency</strong>
between the two ops. The edge attributes here are features of the tensor (e.g.
size, source machine, destination machine, etc.).</p>
<p>In a data centre, when a job arrives, each op in the job is placed onto some
machine to execute the op. These ops might be placed all on one machine or, as
is often the case for many applications, spread out across machines according
to e.g. some heuristic. The <strong>network</strong> is used to pass the tensors around
between the machines executing the ops. These tensors/data objects flowing
between ops are <strong>flows</strong>. The flows of a given job might flow through the network
at the same time or at different times depending on e.g. scheduling decisions, constraints,
dependencies, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In a job graph, edges between ops represent 1 of 2 types of op dependency:</p>
<ul class="simple">
<li><p><strong>Data dependency</strong>: Op j can only begin when op i’s output tensor(s)
have arrived. Therefore, data dependencies become network flows <em>if</em>
op j and op i are ran on separate network endpoints.</p></li>
<li><p><strong>Control dependency</strong>: Op j can only begin when op i has finished.
No data is exchanged, therefore control dependencies never become
network flows.</p></li>
</ul>
</div>
<p>Common job demand characteristics include:</p>
<ul class="simple">
<li><p>job interarrival time;</p></li>
<li><p>which machine each op in the job is placed on;</p></li>
<li><p>number of ops in the job;</p></li>
<li><p>run times of the ops;</p></li>
<li><p>size of data dependencies (flows) between ops;</p></li>
<li><p>ratio of control to data dependencies in job computation graph; and</p></li>
<li><p>connectivity of job graph.</p></li>
</ul>
<p>You can use the same value and node distributions as before to generate realistic
job demands. The only difference is that now we will pass additional arguments
into <code class="xref py py-func docutils literal notranslate"><span class="pre">tpg.create_demand_data()</span></code>. TrafPy will respond by generating job computation graphs
rather than flows as the demands in the returned dictionary.</p>
<p>Consider that we want to create 10 realistic data centre jobs in the same simple
5-node network as before (but now omitting <code class="docutils literal notranslate"><span class="pre">show_fig</span></code> to save page space).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">num_demands</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tpg</span><span class="o">.</span><span class="n">gen_simple_network</span><span class="p">(</span><span class="n">ep_label</span><span class="o">=</span><span class="s1">&#39;endpoint&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You could start by definiing the flow size distribution of the flows inside the
job graphs</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow_size_dist</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_val_dist</span><span class="p">(</span><span class="n">min_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">max_val</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span><span class="n">skews</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">scales</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span><span class="n">num_skew_samples</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">],</span><span class="n">bg_factor</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">num_bins</span><span class="o">=</span><span class="mi">34</span><span class="p">)</span>
</pre></div>
</div>
<p>then the job interarrival time distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">interarrival_time_dist</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_val_dist</span><span class="p">(</span><span class="n">min_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">max_val</span><span class="o">=</span><span class="mf">1e8</span><span class="p">,</span><span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1800000</span><span class="p">,</span><span class="mi">10000000</span><span class="p">],</span><span class="n">skews</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="n">scales</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mi">7500</span><span class="p">,</span><span class="mi">3500000</span><span class="p">,</span><span class="mi">20000000</span><span class="p">],</span><span class="n">num_skew_samples</span><span class="o">=</span><span class="p">[</span><span class="mi">800</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mi">4000</span><span class="p">,</span><span class="mi">4000</span><span class="p">,</span><span class="mi">3000</span><span class="p">],</span><span class="n">bg_factor</span><span class="o">=</span><span class="mf">0.025</span><span class="p">,</span><span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>then the number of ops in each job</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">num_ops_dist</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_val_dist</span><span class="p">(</span><span class="n">min_val</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">max_val</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">],</span><span class="n">skews</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">],</span><span class="n">scales</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span><span class="n">num_skew_samples</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">],</span><span class="n">bg_factor</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">round_to_nearest</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>and then the source-destination node (i.e. op machine placement) distribution</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">endpoints</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;endpoints&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_dist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">gen_multimodal_node_dist</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">num_skewed_nodes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then use your distributions to generate your job-centric demand data
returned neatly into a single dictionary</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">job_centric_demand_data</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">create_demand_data</span><span class="p">(</span><span class="n">num_demands</span><span class="o">=</span><span class="n">num_demands</span><span class="p">,</span><span class="n">eps</span><span class="o">=</span><span class="n">endpoints</span><span class="p">,</span><span class="n">node_dist</span><span class="o">=</span><span class="n">node_dist</span><span class="p">,</span><span class="n">flow_size_dist</span><span class="o">=</span><span class="n">flow_size_dist</span><span class="p">,</span><span class="n">interarrival_time_dist</span><span class="o">=</span><span class="n">interarrival_time_dist</span><span class="p">,</span><span class="n">num_ops_dist</span><span class="o">=</span><span class="n">num_ops_dist</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">use_multiprocessing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Don’t forget to save your data</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tpg</span><span class="o">.</span><span class="n">pickle_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">job_centric_demand_data</span><span class="p">,</span><span class="n">path_to_save</span><span class="o">=</span><span class="s1">&#39;data/job_centric_demand_data.pickle&#39;</span><span class="p">,</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">zip_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>TrafPy job-centric demand data dictionaries are organised as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;job_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;job_0&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&#39;job_n&#39;</span><span class="p">],</span>
    <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">networkx_graph_job_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">networkx_graph_job_n</span><span class="p">],</span>
    <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">event_time_job_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">event_time_job_n</span><span class="p">],</span>
    <span class="s1">&#39;establish&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">event_establish_job_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">event_establish_job_1</span><span class="p">],</span>
    <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">index_job_0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">index_job_1</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where the <code class="docutils literal notranslate"><span class="pre">'job'</span></code> key contains the list of job computation graphs with all
the embedded demand data. You can visualise the job computation graph(s):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">jobs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">job_centric_demand_data</span><span class="p">[</span><span class="s1">&#39;job&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">tpg</span><span class="o">.</span><span class="n">draw_job_graphs</span><span class="p">(</span><span class="n">job_graphs</span><span class="o">=</span><span class="n">jobs</span><span class="p">,</span><span class="n">show_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="visually-shaping-trafpy-distributions">
<h2>Visually Shaping TrafPy Distributions<a class="headerlink" href="#visually-shaping-trafpy-distributions" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="trafpy-manager">
<h2>TrafPy Manager<a class="headerlink" href="#trafpy-manager" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="License.html" class="btn btn-neutral float-right" title="License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Install.html" class="btn btn-neutral float-left" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Christopher W. F. Parsonson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>